<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Madarsa Result Card</title>
    <style>
        body { padding: 20px; font-family: sans-serif; background: #f0f0f0; }
        #card { width: 800px; margin: auto; background: white; border: 4px solid #1b5e20; padding: 30px; position: relative; }
        .header { text-align: center; color: #1b5e20; border-bottom: 2px solid #1b5e20; padding-bottom: 10px; }
        .exam-tag { background: #fffdd0; padding: 5px 20px; border-radius: 20px; border: 1px solid #1b5e20; font-weight: bold; display: inline-block; margin-top: 10px; }
        .info-table { width: 100%; margin: 20px 0; }
        .info-table td { padding: 5px; font-weight: bold; }
        table.marks { width: 100%; border-collapse: collapse; margin-top: 20px; }
        table.marks th, table.marks td { border: 1px solid #1b5e20; padding: 10px; text-align: center; }
        .footer { margin-top: 50px; display: flex; justify-content: space-between; }
    </style>
</head>
<body>

<div id="card">
    <div class="header">
        <h1 style="margin:0;">MADARSA ARABIA NOORUL ULOOM</h1>
        <p>Karma Khan, Sant Kabir Nagar (U.P.)</p>
        <div class="exam-tag" id="examHeading">Report Card</div>
    </div>

    <table class="info-table">
        <tr>
            <td>Name: <span id="sname">...</span></td>
            <td>Father: <span id="fname">...</span></td>
        </tr>
        <tr>
            <td>Roll No: <span id="roll">...</span></td>
            <td>Class: <span id="class">...</span></td>
            <td>Year: <span id="year">...</span></td>
        </tr>
    </table>

    <table class="marks">
        <thead>
            <tr style="background:#e8f5e9;"><th>Subject</th><th>Max Marks</th><th>Obtained</th></tr>
        </thead>
        <tbody id="markSheet"></tbody>
        <tfoot>
            <tr style="font-weight:bold;"><td>TOTAL</td><td>1000</td><td id="total">0</td></tr>
            <tr style="font-weight:bold;"><td>RESULT</td><td colspan="2" id="resultStatus">...</td></tr>
        </tfoot>
    </table>

    <div class="footer">
        <div>Principal Signature</div>
        <div>Parent Signature</div>
    </div>
</div>

<script>
    window.onload = function() {
        const params = new URLSearchParams(window.location.search);
        const roll = params.get('roll');
        const type = params.get('type');
        const sClass = params.get('class');
        const sYear = params.get('year');

        document.getElementById('examHeading').innerText = `${type} Examination - ${sYear}`;
        document.getElementById('roll').innerText = roll;
        document.getElementById('class').innerText = sClass;
        document.getElementById('year').innerText = sYear;

        fetchData(roll, type);
    };

    async function fetchData(roll, type) {
        // YAHAN APNI GOOGLE SHEET KA CSV LINK DAALEIN
        const sheetUrl = 'YOUR_CSV_LINK_HERE';
        
        try {
            const res = await fetch(sheetUrl);
            const text = await res.text();
            const rows = text.split('\n').map(r => r.split(','));
            
            // Student ko dhoondein
            const student = rows.find(r => r[0].trim() === roll.trim());
            
            if(student) {
                document.getElementById('sname').innerText = student[1];
                document.getElementById('fname').innerText = student[2];
                
                let subjects = ["Quran","Hifz","Deeniyat","Urdu","English","Hindi","Science","S. Science","Math","Dua"];
                let total = 0;
                let html = "";
                
                subjects.forEach((s, i) => {
                    let mark = parseInt(student[5+i]) || 0;
                    total += mark;
                    html += `<tr><td>${s}</td><td>100</td><td>${mark}</td></tr>`;
                });
                
                document.getElementById('markSheet').innerHTML = html;
                document.getElementById('total').innerText = total;
                document.getElementById('resultStatus').innerText = total >= 330 ? "PASS" : "FAIL";
            } else {
                alert("Data nahi mila!");
            }
        } catch(e) { console.error(e); }
    }
</script>
</body>
</html>
